{% extends "greta/greta_base.html" %}
{% load url from future %}
{% load greta_tags %}

{% block link %}
  <style>
    #tree-paths a {
    float: left;
    }
  </style>
{% endblock %}

{% block content %}
  {% include "greta/_tabs.html" %}

  <h2 id="tree-paths">
    <a href="{% url 'tree_detail' pk=repo.pk ref=ref path="" %}">
      {{ repo.name }}/
    </a>
    {% for dir in path|split_path %}
      {% if not forloop.last %}
        <a href="{% url 'tree_detail' pk=repo.pk ref=ref path=dir %}">
          {{ dir }}/
        </a>
      {% endif %}

      {% if forloop.last %}
        {{ dir }}
      {% endif %}
    {% endfor %}
  </h2>

  <div id="blob">
    {% if blob_is_binary  %}
      {% if blob_is_image %}
        <div class="well">
          <img src="{% url 'image_detail' pk=repo.pk ref=ref path=path %}"
               alt="{{ path }}" class="img-polaroid" />
        </div>
      {% else %}
        <p>
          Looks like this file is binary.
        </p>
      {% endif %}
    {% else %}
      {{ blob_contents|pygmentize_blob:path }}
    {% endif %}
  </div>

{% endblock %}
